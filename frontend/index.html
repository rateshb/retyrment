<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Retyrment</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: { 50: '#eef2ff', 100: '#e0e7ff', 200: '#c7d2fe', 300: '#a5b4fc', 400: '#818cf8', 500: '#6366f1', 600: '#4f46e5', 700: '#4338ca' },
                        success: { 50: '#ecfdf5', 100: '#d1fae5', 400: '#34d399', 500: '#10b981', 600: '#059669' },
                        warning: { 50: '#fffbeb', 100: '#fef3c7', 400: '#fbbf24', 500: '#f59e0b', 600: '#d97706' },
                        danger: { 50: '#fef2f2', 100: '#fee2e2', 400: '#f87171', 500: '#ef4444', 600: '#dc2626' }
                    },
                    fontFamily: { sans: ['Inter', 'sans-serif'], mono: ['JetBrains Mono', 'monospace'] }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="bg-slate-50 text-slate-800 font-sans min-h-screen bg-pattern">
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <aside class="w-64 bg-white border-r border-slate-200 flex flex-col shadow-sm">
            <div class="p-5 border-b border-slate-200">
                <a href="index.html" class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-lg logo-gradient flex items-center justify-center text-white font-bold text-xl shadow-lg shadow-primary-500/30">‚Çπ</div>
                    <span class="text-xl font-bold bg-gradient-to-r from-primary-500 to-primary-700 bg-clip-text text-transparent">Retyrment</span>
                </a>
            </div>
            <nav class="flex-1 py-4 overflow-y-auto scrollbar-thin">
                <div class="px-4 mb-2 text-xs font-semibold text-slate-400 uppercase tracking-wider">Overview</div>
                <a href="index.html" class="nav-item active flex items-center gap-3 px-5 py-3 text-slate-600 border-l-2 border-transparent" data-page="dashboard">
                    <span>üìä</span> Dashboard
                </a>
                <div class="px-4 mt-6 mb-2 text-xs font-semibold text-slate-400 uppercase tracking-wider">Data Entry</div>
                <a href="income.html" class="nav-item flex items-center gap-3 px-5 py-3 text-slate-600 border-l-2 border-transparent" data-page="income">
                    <span>üí∞</span> Income
                </a>
                <a href="investments.html" class="nav-item flex items-center gap-3 px-5 py-3 text-slate-600 border-l-2 border-transparent" data-page="investments">
                    <span>üìà</span> Investments
                </a>
                <a href="loans.html" class="nav-item flex items-center gap-3 px-5 py-3 text-slate-600 border-l-2 border-transparent" data-page="loans">
                    <span>üè¶</span> Loans
                </a>
                <a href="insurance.html" class="nav-item flex items-center gap-3 px-5 py-3 text-slate-600 border-l-2 border-transparent" data-page="insurance">
                    <span>üõ°Ô∏è</span> Insurance
                </a>
                <a href="expenses.html" class="nav-item flex items-center gap-3 px-5 py-3 text-slate-600 border-l-2 border-transparent" data-page="expenses">
                    <span>üõí</span> Expenses
                </a>
                <a href="goals.html" class="nav-item flex items-center gap-3 px-5 py-3 text-slate-600 border-l-2 border-transparent" data-page="goals">
                    <span>üéØ</span> Goals
                </a>
                <div class="px-4 mt-6 mb-2 text-xs font-semibold text-slate-400 uppercase tracking-wider">Analysis</div>
                <a href="calendar.html" class="nav-item flex items-center gap-3 px-5 py-3 text-slate-600 border-l-2 border-transparent" data-page="calendar">
                    <span>üìÖ</span> Calendar
                </a>
                <a href="retirement.html" class="nav-item flex items-center gap-3 px-5 py-3 text-slate-600 border-l-2 border-transparent" data-page="retirement">
                    <span>üèñÔ∏è</span> Retirement
                </a>
                <a href="simulation.html" class="nav-item flex items-center gap-3 px-5 py-3 text-slate-600 border-l-2 border-transparent" data-page="simulation" data-requires-pro>
                    <span>üé≤</span> Simulation
                    <span class="pro-badge text-xs px-1.5 py-0.5 bg-amber-100 text-amber-700 rounded ml-auto">PRO</span>
                </a>
                <a href="reports.html" class="nav-item flex items-center gap-3 px-5 py-3 text-slate-600 border-l-2 border-transparent" data-page="reports">
                    <span>üìë</span> Reports
                </a>
            </nav>
            <div class="p-4 border-t border-slate-200">
                <a href="preferences.html" class="nav-item flex items-center gap-3 px-3 py-2 text-slate-500 hover:text-slate-700 rounded" data-page="preferences">
                    <span>‚öôÔ∏è</span> Preferences
                </a>
                <a href="settings.html" class="nav-item flex items-center gap-3 px-3 py-2 text-slate-500 hover:text-slate-700 rounded mt-1" data-page="settings">
                    <span>üîß</span> Settings
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto scrollbar-thin">
            <header class="sticky top-0 z-10 header-blur border-b border-slate-200 px-8 py-4">
                <div class="flex justify-between items-center">
                    <div>
                        <h1 class="text-2xl font-semibold text-slate-800">Dashboard</h1>
                        <p class="text-sm text-slate-500">Your financial overview at a glance</p>
                    </div>
                    <div class="flex items-center gap-4">
                        <button onclick="exportJSON()" class="px-4 py-2 text-sm bg-white hover:bg-slate-50 rounded-lg border border-slate-300 text-slate-600 flex items-center gap-2 shadow-sm">
                            <span>üíæ</span> Export
                        </button>
                    </div>
                </div>
            </header>

            <div class="p-8" id="page-content">
                <!-- Loading State -->
                <div id="loading" class="text-center py-8">
                    <div class="animate-pulse text-slate-400">Loading dashboard...</div>
                </div>

                <!-- Dashboard Content (populated by JS) -->
                <div id="dashboard-content" class="hidden">
                    <!-- Summary Cards - Row 1: Current Position -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                        <div class="card p-6">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 rounded-xl bg-primary-100 flex items-center justify-center text-2xl">üí∞</div>
                                <div>
                                    <div class="text-sm text-slate-500">Net Worth</div>
                                    <div class="text-2xl font-bold text-primary-600" id="net-worth">‚Çπ0</div>
                                </div>
                            </div>
                        </div>
                        <div class="card p-6">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 rounded-xl bg-success-100 flex items-center justify-center text-2xl">üìà</div>
                                <div>
                                    <div class="text-sm text-slate-500">Total Assets</div>
                                    <div class="text-2xl font-bold text-success-600" id="total-assets">‚Çπ0</div>
                                </div>
                            </div>
                        </div>
                        <div class="card p-6">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 rounded-xl bg-danger-100 flex items-center justify-center text-2xl">üè¶</div>
                                <div>
                                    <div class="text-sm text-slate-500">Total Liabilities</div>
                                    <div class="text-2xl font-bold text-danger-600" id="total-liabilities">‚Çπ0</div>
                                </div>
                            </div>
                        </div>
                        <div class="card p-6">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 rounded-xl bg-purple-100 flex items-center justify-center text-2xl">üíµ</div>
                                <div>
                                    <div class="text-sm text-slate-500">Monthly Savings</div>
                                    <div class="text-2xl font-bold text-purple-600" id="monthly-savings">‚Çπ0</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Summary Cards - Row 2: Retirement Planning -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="card p-6 border-l-4 border-primary-500">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 rounded-xl bg-primary-100 flex items-center justify-center text-2xl">üèñÔ∏è</div>
                                <div class="flex-1">
                                    <div class="text-sm text-slate-500">Projected Corpus at Retirement</div>
                                    <div class="text-2xl font-bold text-primary-600" id="projected-corpus">‚Çπ0</div>
                                    <div class="text-xs text-slate-400" id="retirement-age-note">At age 60</div>
                                </div>
                            </div>
                        </div>
                        <div class="card p-6 border-l-4" id="required-corpus-card-main">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 rounded-xl bg-slate-100 flex items-center justify-center text-2xl" id="required-corpus-icon">üéØ</div>
                                <div class="flex-1">
                                    <div class="text-sm text-slate-500">Required Corpus</div>
                                    <div class="text-2xl font-bold text-slate-700" id="required-corpus-main">‚Çπ0</div>
                                    <div class="text-xs" id="corpus-gap-main">Based on expenses & goals</div>
                                </div>
                            </div>
                        </div>
                        <div class="card p-6 border-l-4" id="retirement-status-card">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 rounded-xl flex items-center justify-center text-2xl" id="retirement-status-icon">üìä</div>
                                <div class="flex-1">
                                    <div class="text-sm text-slate-500">Retirement Readiness</div>
                                    <div class="text-2xl font-bold" id="retirement-readiness">--</div>
                                    <div class="text-xs" id="retirement-status-note">Calculating...</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Asset Allocation & High Priority Alerts -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                        <div class="card p-6">
                            <h3 class="text-lg font-semibold text-slate-800 mb-4">Asset Allocation</h3>
                            <div class="h-64">
                                <canvas id="networth-chart"></canvas>
                            </div>
                        </div>
                        <div class="card p-6">
                            <h3 class="text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2">
                                üö® High Priority Alerts
                                <span class="text-xs font-normal text-slate-400" id="alerts-count">(0)</span>
                            </h3>
                            <div class="space-y-3 max-h-64 overflow-y-auto" id="high-priority-alerts">
                                <div class="text-center py-6 text-slate-400">
                                    <div class="text-4xl mb-2">‚úÖ</div>
                                    <div>No high priority alerts</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Goals & Recommendations -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="card p-6">
                            <h3 class="text-lg font-semibold text-slate-800 mb-4">Goal Progress</h3>
                            <div class="h-64">
                                <canvas id="goals-chart"></canvas>
                            </div>
                        </div>
                        <div class="card p-6">
                            <h3 class="text-lg font-semibold text-slate-800 mb-4">Recommendations</h3>
                            <div class="space-y-3 max-h-64 overflow-y-auto" id="recommendations">
                                <div class="text-slate-400">Loading...</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Error State -->
                <div id="error-state" class="hidden">
                    <div class="card p-8 text-center">
                        <div class="text-4xl mb-4">‚ö†Ô∏è</div>
                        <h3 class="text-xl font-semibold text-slate-800 mb-2">Unable to load data</h3>
                        <p class="text-slate-500 mb-4">Make sure the backend server is running on port 8080</p>
                        <button onclick="loadDashboard()" class="px-4 py-2 btn-primary rounded-lg">Retry</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Toast -->
    <div id="toast" class="fixed bottom-6 right-6 bg-white border border-slate-200 rounded-lg px-4 py-3 shadow-lg hidden">
        <div class="flex items-center gap-3">
            <span id="toast-icon">‚úÖ</span>
            <span id="toast-message" class="text-slate-700">Success!</span>
        </div>
    </div>

    <script src="js/api.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/common.js"></script>
    <script src="js/dashboard.js"></script>
</body>
</html>
